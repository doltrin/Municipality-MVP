import React from 'react';
import { Bell, Search, Wallet, Bus, Recycle, Zap, AlertTriangle, FileText, Sun, ChevronRight, MapPin } from 'lucide-react';
import { useNavigate } from 'react-router-dom';
import { newsData } from '../data/newsData';
import { motion } from 'framer-motion';

const Home: React.FC = () => {
  const navigate = useNavigate();

  const container = {
    hidden: { opacity: 0 },
    show: {
      opacity: 1,
      transition: { staggerChildren: 0.05 }
    }
  };

  const item = {
    hidden: { y: 10, opacity: 0 },
    show: { y: 0, opacity: 1 }
  };

  return (
    <div className="flex flex-col min-h-full bg-background dark:bg-background-dark font-sans pb-32">
      {/* Sticky Utility Header */}
      <header className="px-4 pt-14 pb-4 bg-white dark:bg-surface-dark border-b border-zinc-200 dark:border-zinc-800 sticky top-0 z-30 flex justify-between items-center">
        <div className="flex items-center gap-2">
          <div className="w-8 h-8 bg-primary dark:bg-accent rounded-lg flex items-center justify-center text-white font-bold text-sm">A</div>
          <span className="text-lg font-bold text-slate-900 dark:text-white tracking-tight">Athens<span className="text-accent">.gov</span></span>
        </div>
        <div className="flex gap-3">
          <button className="text-zinc-500 dark:text-zinc-400 hover:text-slate-900 dark:hover:text-white transition-colors">
            <Search size={22} />
          </button>
          <button 
            onClick={() => navigate('/notifications')}
            className="text-zinc-500 dark:text-zinc-400 hover:text-slate-900 dark:hover:text-white transition-colors relative"
          >
            <Bell size={22} />
            <span className="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full border border-white dark:border-surface-dark" />
          </button>
        </div>
      </header>

      <motion.div 
        variants={container}
        initial="hidden"
        animate="show"
        className="p-4 space-y-6"
      >
        {/* DAILY BRIEFING */}
        <motion.div variants={item} className="flex justify-between items-end">
          <div>
            <p className="text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wide mb-1">Thursday, 24 Oct</p>
            <h1 className="text-2xl font-extrabold text-slate-900 dark:text-white leading-tight">Good Morning,<br/>Alexandros</h1>
          </div>
          <div className="text-right">
            <div className="flex items-center justify-end gap-2 text-slate-900 dark:text-white">
              <Sun size={24} className="text-amber-500 fill-amber-500" />
              <span className="text-2xl font-bold">24°</span>
            </div>
            <span className="text-xs font-medium text-zinc-500 dark:text-zinc-400">Sunny • UV Low</span>
          </div>
        </motion.div>

        {/* MY OVERVIEW - Horizontal Scroll for Quick Status */}
        <motion.div variants={item}>
          <div className="flex gap-3 overflow-x-auto hide-scrollbar pb-2 -mx-4 px-4">
            {/* Wallet Card */}
            <button 
              onClick={() => navigate('/wallet')}
              className="min-w-[160px] bg-white dark:bg-surface-dark p-4 rounded-xl border border-zinc-200 dark:border-zinc-700 shadow-sm active:border-accent transition-colors text-left"
            >
              <div className="flex justify-between items-start mb-3">
                <div className="p-2 bg-indigo-50 dark:bg-indigo-900/30 rounded-lg text-accent dark:text-indigo-300">
                  <Wallet size={18} />
                </div>
                <span className="text-[10px] font-bold bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 px-1.5 py-0.5 rounded">+50</span>
              </div>
              <div className="text-2xl font-bold text-slate-900 dark:text-white">€45.50</div>
              <div className="text-xs text-zinc-500 dark:text-zinc-400 font-medium">Wallet Balance</div>
            </button>

            {/* Waste Card */}
            <button 
              onClick={() => navigate('/waste')}
              className="min-w-[160px] bg-white dark:bg-surface-dark p-4 rounded-xl border border-zinc-200 dark:border-zinc-700 shadow-sm active:border-emerald-500 transition-colors text-left"
            >
              <div className="flex justify-between items-start mb-3">
                <div className="p-2 bg-emerald-50 dark:bg-emerald-900/30 rounded-lg text-emerald-600 dark:text-emerald-400">
                  <Recycle size={18} />
                </div>
              </div>
              <div className="text-lg font-bold text-slate-900 dark:text-white">Tomorrow</div>
              <div className="text-xs text-zinc-500 dark:text-zinc-400 font-medium">Next Pickup</div>
            </button>

            {/* Transport Card */}
            <button 
              onClick={() => navigate('/transport')}
              className="min-w-[160px] bg-white dark:bg-surface-dark p-4 rounded-xl border border-zinc-200 dark:border-zinc-700 shadow-sm active:border-blue-500 transition-colors text-left"
            >
              <div className="flex justify-between items-start mb-3">
                <div className="p-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400">
                  <Bus size={18} />
                </div>
              </div>
              <div className="text-lg font-bold text-slate-900 dark:text-white">Active</div>
              <div className="text-xs text-zinc-500 dark:text-zinc-400 font-medium">Bus Ticket</div>
            </button>
          </div>
        </motion.div>

        {/* ACTION GRID */}
        <motion.div variants={item}>
          <h2 className="text-sm font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wide mb-3">Services</h2>
          <div className="grid grid-cols-2 gap-3">
            {[
              { label: 'Issue Permit', icon: FileText, color: 'text-indigo-600 dark:text-indigo-400', bg: 'bg-indigo-50 dark:bg-indigo-900/20', path: '/registry' },
              { label: 'Report Issue', icon: AlertTriangle, color: 'text-orange-600 dark:text-orange-400', bg: 'bg-orange-50 dark:bg-orange-900/20', path: '/requests' },
              { label: 'Pay Bill', icon: Zap, color: 'text-yellow-600 dark:text-yellow-400', bg: 'bg-yellow-50 dark:bg-yellow-900/20', path: '/payments' },
              { label: 'Find Event', icon: MapPin, color: 'text-pink-600 dark:text-pink-400', bg: 'bg-pink-50 dark:bg-pink-900/20', path: '/news' },
            ].map((action, i) => (
              <button 
                key={i}
                onClick={() => navigate(action.path)}
                className="bg-white dark:bg-surface-dark p-4 rounded-xl border border-zinc-200 dark:border-zinc-700 shadow-sm flex items-center gap-3 active:scale-[0.98] transition-transform"
              >
                <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${action.bg} ${action.color}`}>
                  <action.icon size={20} />
                </div>
                <span className="font-bold text-slate-700 dark:text-slate-200 text-sm">{action.label}</span>
              </button>
            ))}
          </div>
        </motion.div>

        {/* CITY FEED */}
        <motion.div variants={item}>
          <div className="flex justify-between items-end mb-3">
            <h2 className="text-sm font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wide">Latest Updates</h2>
            <button onClick={() => navigate('/news')} className="text-accent text-xs font-bold hover:text-accent-hover">View All</button>
          </div>
          <div className="bg-white dark:bg-surface-dark rounded-xl border border-zinc-200 dark:border-zinc-700 shadow-sm divide-y divide-zinc-100 dark:divide-zinc-700/50">
            {newsData.slice(0, 3).map((news) => (
              <button 
                key={news.id}
                onClick={() => navigate(`/news/${news.id}`)}
                className="w-full p-4 flex gap-4 text-left active:bg-zinc-50 dark:active:bg-zinc-800 transition-colors"
              >
                <div className="w-12 h-12 bg-zinc-100 dark:bg-zinc-800 rounded-lg bg-cover bg-center flex-shrink-0" style={{backgroundImage: `url(${news.image})`}}></div>
                <div className="flex-1 min-w-0">
                  <div className="text-[10px] font-bold text-accent uppercase mb-0.5">{news.category}</div>
                  <h3 className="text-sm font-bold text-slate-900 dark:text-white truncate">{news.title}</h3>
                  <p className="text-xs text-zinc-500 dark:text-zinc-400 mt-1 line-clamp-1">{news.content}</p>
                </div>
                <ChevronRight size={16} className="text-zinc-300 dark:text-zinc-600 self-center" />
              </button>
            ))}
          </div>
        </motion.div>
      </motion.div>
    </div>
  );
};

export default Home;
